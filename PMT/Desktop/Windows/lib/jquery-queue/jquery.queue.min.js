function Queue(n){n=n||Array();var i=this,u=null,f=null,a=!0,s=-1,t=0,v=-1,e=!1,o={},r=!1,h=function(n,t){o[n]&&o[n].fireWith(i,t)},c=function(n){return i.baseURL+(n.lastIndexOf("?")!==-1?n.substr(0,n.lastIndexOf("?")):n)},l=function(n){var t={},i;return n.lastIndexOf("?")!==-1&&(i=n.substr(n.lastIndexOf("?")+1).split("&"),jQuery.each(i,function(n,i){var r=i.split("=");t[r[0]]=r[1]})),t};this.connection={timeout:2e3,check:!0,url:"http://www.designcise.com/framework/img/chk_conn.gif"};this.timeout=5e3;this.baseURL="";this.alwaysSend=null;this.dataType="json";this.cache=!1;this.loaderClass="loader";this.type="POST";this.on=function(n,t){return o[n]||(o[n]=jQuery.Callbacks(),o[n].add(t)),this};this.off=function(n){if(o[n])return delete o[n],this};this.add=function(t,i,r){var u;if(r=r||!1,null==i||i===n.length&&r)if(t instanceof Array)for(u=0;u<t.length;u++)n.push(t[u]);else n.push(t);else if(i-=1,t instanceof Array)for(u=t.length-1;u>=0;u--)n.splice(i+(r?1:0),0,t[u]);else n.splice(i+(r?1:0),0,t);return this};this.remove=function(i){return i>=0&&i>t&&i<n.length&&n.splice(i-1,1),this};this.showLoader=function(n,t){return n=jQuery(n)||jQuery(document.body),t=t||.65,n.css("position")==="static"&&n.css("position","relative"),jQuery('<div class="'+i.loaderClass+'"/>').prependTo(n).fadeTo("slow",t),this};this.hideLoader=function(n){return n=null!=n?jQuery(n).find("."+i.loaderClass):jQuery("."+i.loaderClass),n.fadeOut("slow","linear",function(){jQuery(this).remove()}),this};this.request=function(u,o,s,y){var p,w,b;if(a){if(typeof u=="string"&&(u={url:u,success:o,error:s,always:y}),e=!0,null!=i.alwaysSend)for(p=jQuery.param(i.alwaysSend),p=p.split("&"),w=0;w<p.length;w++){var d=p[w].split("="),g=d[0],nt=d[1];u.url.indexOf(g+"=")===-1&&(u.url=u.url+(null!=nt?(u.url.indexOf("?")!==-1?"&":"?")+g+"="+nt:""))}if((u.dataType==="jsonp"||i.dataType==="jsonp")&&(b="queueProxy"+(new Date).getTime(),window[b]=function(){return!1}),h("processStart",[t+1,c(u.url),l(u.url),n.length,t===v]),v=t,u.url.indexOf("label?")!==-1||u.url.indexOf("static?")!==-1||u.url.indexOf("image?")!==-1){var tt="",it=app.cache.localGet("language")||app.localization.language||"eng",k=u.url.indexOf("&lang=");k!==-1?(tt=u.url.substring(k,u.url.length),u.url=u.url.replace(tt,"")):u.url=u.url.substring(k,u.url.length);u.url=u.url+"&lang="+it}f=jQuery.ajax({url:i.baseURL+(u.url||""),dataType:u.dataType||i.dataType,cache:u.cache||i.cache,jsonpCallback:b,type:u.type||i.type,crossDomain:u.dataType==="jsonp"||i.dataType==="jsonp"?!0:!1,timeout:u.timeout||i.timeout,error:function(i,o,s){f=null;e=!1;t+=1;o==="cancel"?(o="abort",s="Request Canceled"):o==="stop"&&(o="abort",s="Request Stopped");typeof u.error=="function"&&u.error(t,c(u.url),l(u.url),o,s,n.length,r);typeof u.always=="function"&&u.always(t,n.length,!1,r);r=!1},success:function(i){f=null;var o=r;r=e=typeof u.success=="function"?u.success(i,t+1,c(u.url),l(u.url),n.length,r)||!1:!1;e||(t+=1);typeof u.always=="function"&&u.always(t,n.length,!0,o)}})}return this};this.cancel=function(i,u){if(i=i-1,u=typeof u!="boolean"?!1:u,i<n.length){var e=setInterval(function(){if(t<=i){if(null!=f&&t===i){if(u&&!r)return;f.abort("cancel");clearInterval(e);e=null}else if(s===-1||s<t){if(u&&!r)return;s=i}}else clearInterval(e),e=null},50);setTimeout(function(){null!=e&&clearInterval(e)},25e3)}return this};this.stop=function(){var e,i;if(null!=u){for(clearInterval(u),null!=f&&f.abort("stop"),e=r,i=t;i<n.length;i++)typeof n[i].error=="function"&&n[i].error(i+1,c(n[i].url),l(n[i].url),"abort","Request Stopped",n.length,e),e=!1;for(i=t;i<n.length;i++)typeof n[i].always=="function"&&n[i].always(i+1,n.length,!1,r),r=!1;h("complete");t=n.length-1}return this};this.start=function(){var f;if(i.isWorking()&&i.stop(),s=-1,t=0,v=-1,e=!1,h("init"),f=!1,i.connection.check){var o=document.createElement("img"),y=!1,p=setTimeout(function(){a=y;f=!0},i.connection.timeout);o.src=i.connection.url;o.onerror=function(){a=!1;f=!0;clearTimeout(p)};o.onload=function(){f=y=!0;clearTimeout(p)}}return u=setInterval(function(){var v,o,y;if(i.connection.check&&!f)return!1;if(a)t<n.length?e||(s===t&&(e=!1,t+=1,t>n.length&&(t=n.length),y=n[t-1].url,typeof n[t].error=="function"&&n[t].error(t,c(y),l(y),"abort","Request Skipped",n.length,r),typeof n[t].always=="function"&&n[t].always(t,n.length,!1,r),r=!1),t<n.length&&i.request(n[t])):t===n.length&&(null!=u&&clearInterval(u),h("complete"));else{for(null!=u&&clearInterval(u),v=r,o=t;o<n.length;o++)typeof n[o].error=="function"&&n[o].error(o+1,window.location.href,"","connection","Error Establishing Connection",n.length,v),v=!1;for(o=t;o<n.length;o++)typeof n[o].always=="function"&&n[o].always(o+1,n.length,!1,r),r=!1;h("complete")}},100),this};this.prop=function(t,r,u){return null!=u?(n[t-1][r]=u,this):n[t-1][r]||i[r]};this.isDone=function(n){return t>=n};this.isWorking=function(){return t>=0&&t<n.length}}